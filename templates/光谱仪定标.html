<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>光谱仪定标</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- UIkit CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.2.2/dist/css/uikit.min.css"/>

        <!-- UIkit JS -->
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.2.2/dist/js/uikit.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/uikit@3.2.2/dist/js/uikit-icons.min.js"></script>
        <style>
            .J-page-title {
                height: 30px;
                line-height: 30px;
                padding: 20px 0px 20px 100px;
                background: #ffffff;
                font-size: 28px;
                font-family: cursive;
                color: #1f87f0;
                box-shadow: 0 2px 8px #f0f1f2;
                font-weight: 600;
                position: fixed;
                width: 100%;
                z-index: 2;
            }

            .div_content {
                width: 600px;
                padding: 20px 20px 20px 100px;
                margin: 0 auto;
            }

            .J-block-title {
                margin: 46px 0 30px;
            }

            .J-modity-input {
                margin-left: 15px;
                width: 200px;
            }

            .J-modity-div {
                display: flow-root !important;
            }

            .J-range {
                margin-top: 5px;
            }

            .J-radio {
                margin-right: 56px;
            }

            .J-radio-input {
                margin-right: 6px;
            }
        </style>
    </head>
    <body>
        <div class="J-page-title">
            <p>光谱仪定标</p>
        </div>

        <div class="div_content">
            <div uk-alert>
                <a class="uk-alert-close" uk-close></a>
                <h3>Welcome!</h3>
                <p>欢迎使用在线光谱仪定标小程序！</p>
            </div>


            <p class="uk-heading-line uk-text-center J-block-title"><span>文件上传</span></p>
            <div class="js-upload uk-placeholder uk-text-center">
                <span uk-icon="icon: cloud-upload"></span>
                <span class="uk-text-middle">拖动文件 or</span>
                <div uk-form-custom>
                    <input type="file" multiple='multiple'>
                    <span class="uk-link">点击选择标准光谱文件</span>
                </div>
                <progress id="js-progressbar" class="uk-progress" value="0" max="100" hidden></progress>
            </div>

            <div class="js-upload uk-placeholder uk-text-center">
                <span uk-icon="icon: cloud-upload"></span>
                <span class="uk-text-middle">拖动文件 or</span>
                <div uk-form-custom>
                    <input type="file" multiple='multiple'>
                    <span class="uk-link">点击选择观测光谱文件</span>
                </div>
                <progress id="js-progressbar1" class="uk-progress" value="0" max="100" hidden></progress>
            </div>

            <div class="form-group" uk-margin style="text-align: center;">
                <form class="uk-form-horizontal" action="/obsconfig" method="post">
                    <div class="uk-margin">
                        <label class="uk-form-label" for="form_ftp1">定标轮次</label>
                        <div class="uk-inline J-modity-input">
                            <span class="uk-form-icon uk-form-icon-flip"></span>
                            <input class="uk-input" type="text" id="DingBiaoLunCi" name="DingBiao"
                            >
                        </div>
                    </div>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="form_ftp2">光纤数目</label>
                        <div class="uk-inline J-modity-input">
                            <span class="uk-form-icon uk-form-icon-flip"></span>
                            <input class="uk-input" type="text" id="form_ftp_usrname" name="GuangQian"
                            >
                        </div>
                    </div>


                    <p uk-margin style="margin: 45px 0 30px;">
                        <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom" type="submit">参数输入完毕点击确定
                        </button>
                    </p>
                </form>
            </div>


            <p uk-margin style="margin: 45px 0 30px;">
                <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom" type="submit">确定
                </button>
            </p>

            <p class="uk-heading-line uk-text-center J-block-title"><span>相关操作</span></p>
            <!-- 创建需要的按钮即可 -->
            <div class="js-upload uk-placeholder uk-text-center">
                <p uk-margin style="text-align: center;">
                    <button class="uk-button uk-button-default" id='getCalibration'>光谱仪定标</button>
                <div class="uk-inline" style="display:inline-block">
                    <button class="uk-button uk-button-default" type="button">导出</button>
                    <div uk-dropdown>
                        <p><a href="http://localhost:8088/result/out.zip" download="result">导出定标参数</a></p>
                    </div>
                </div>
                </p>
            </div>


            <p class="uk-heading-line uk-text-center J-block-title"><span>光谱仪定标结果</span></p>
            <div class="js-upload uk-placeholder uk-text-center">
                <!-- 在这里传上去后端处理好的图片 -->
                <img id="myImage" src="https://bm.cugb.edu.cn/vis/upload/resources/image/2017/05/25/28332.jpg"/>
                <button onclick="handle()" class="uk-button uk-button-default" type="button">显示图片1</button>

                <img id="myImage" src=""/>
                <button onclick="handle1()" class="uk-button uk-button-default" type="button">显示图片2</button>

                <img id="myImage" src=""/>
                <button onclick="handle2()" class="uk-button uk-button-default" type="button">显示图片3</button>

                <img id="myImage" src=""/>
                <button onclick="handle3()" class="uk-button uk-button-default" type="button">显示图片4</button>

                <img id="myImage" src=""/>
                <button onclick="handle4()" class="uk-button uk-button-default" type="button">显示图片5</button>

                <img id="myImage" src=""/>
                <button onclick="handle5()" class="uk-button uk-button-default" type="button">显示图片6</button>

                <img id="myImage" src=""/>
                <button onclick="handle6()" class="uk-button uk-button-default" type="button">显示图片7</button>
            </div>

        </div>

        <!--把标准光谱文件传进来,观测的文件一起传进来，后面尽心文件的移动即可-->
        <script>
            var bar = document.getElementById('js-progressbar');
            UIkit.upload('.js-upload', {

                url: '/1',
                multiple: true,
                name: 'Spectral_Data',

                beforeSend: function () {
                    console.log('beforeSend', arguments);
                },
                beforeAll: function () {
                    console.log('beforeAll', arguments);
                },
                load: function () {
                    console.log('load', arguments);
                },
                error: function () {
                    console.log('error', arguments);
                },
                complete: function () {
                    console.log('complete', arguments);
                },

                loadStart: function (e) {
                    console.log('loadStart', arguments);

                    bar.removeAttribute('hidden');
                    bar.max = e.total;
                    bar.value = e.loaded;
                },

                progress: function (e) {
                    console.log('progress', arguments);

                    bar.max = e.total;
                    bar.value = e.loaded;
                },

                loadEnd: function (e) {
                    console.log('loadEnd', arguments);

                    bar.max = e.total;
                    bar.value = e.loaded;
                },

                completeAll: function () {
                    console.log('completeAll', arguments);

                    setTimeout(function () {
                        bar.setAttribute('hidden', 'hidden');
                    }, 1000);

                    alert('Upload Completed');
                }

            });
        </script>

        <script>
            var btnFLD = document.getElementById("getCalibration");
            btnFLD.onclick = function () {
                var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                httpRequest.open('POST', 'http://localhost:8088/getCalibration', true); //第二步：打开连接
                httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
                httpRequest.send();//发送请求 将情头体写在send中
            }

            const commodity_image = document.createElement("img");
            let imageURL = "/images?skuid=" + r[j]["skuid"];
            commodity_image.src = imageURL;
        </script>

        </script>

        <script>
            function handle() {
                document.getElementById('myImage').src = 'https://wx2.sinaimg.cn/mw2000/0071KLW1ly1gx0citc73pj36y04moe84.jpg';
            }

            function handle1() {
                document.getElementById('myImage').src = 'https://wx2.sinaimg.cn/mw2000/0071KLW1ly1gx0civjj8pj36y04mo1l0.jpg';
            }

            function handle2() {
                document.getElementById('myImage').src = 'https://wx3.sinaimg.cn/mw2000/0071KLW1ly1gx0cixoxrnj36y04mob2c.jpg';
            }

            function handle3() {
                document.getElementById('myImage').src = 'https://wx1.sinaimg.cn/mw2000/0071KLW1ly1gx0ciztf20j36y04mohdw.jpg';
            }

            function handle4() {
                document.getElementById('myImage').src = 'https://wx3.sinaimg.cn/mw2000/0071KLW1ly1gx0cj1xf29j36y04mohdw.jpg';
            }

            function handle5() {
                document.getElementById('myImage').src = 'https://wx1.sinaimg.cn/mw2000/0071KLW1ly1gx0cj3v8g6j36y04moqv6.jpg';
            }

            function handle6() {
                document.getElementById('myImage').src = 'https://wx4.sinaimg.cn/mw2000/0071KLW1ly1gx0cj5vcijj36y04mohdw.jpg';
            }

        </script>

        <srcript>

        </srcript>
    </body>
</html>